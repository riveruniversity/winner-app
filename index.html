<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>River Winner</title>
  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#6366f1">
  <meta name="description" content="Professional random winner selection application">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Winner App">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <!-- Bootstrap CSS for modern styling -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&family=Open+Sans:wght@300;400;600;700&family=Lato:wght@300;400;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Toastify for notifications -->
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="styles.css">
</head>
<body data-theme="light">
  <div class="container-fluid">
    <div class="main-container">
      <!-- Header with theme toggle -->
      <div class="app-header">
        <h2 class="app-title"><img src="./favicon.png" width="80px">River Winner</h2>
        <div class="header-controls">
          <button class="btn btn-outline-secondary me-2" id="themeToggle" title="Toggle theme">
            <i class="bi bi-moon-fill"></i>
          </button>
          <div class="dropdown">
            <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
              <i class="bi bi-gear"></i>
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#" id="backupData"><i class="bi bi-download me-2"></i>Backup Data</a></li>
              <li><a class="dropdown-item" href="#" id="restoreData"><i class="bi bi-upload me-2"></i>Restore Data</a></li>
              <li>
                <hr class="dropdown-divider">
              </li>
              <li><a class="dropdown-item" href="#" data-bs-toggle="tab" id="settingsLink"><i class="bi bi-sliders me-2"></i>Settings</a></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Navigation Tabs -->
      <ul class="nav nav-tabs" id="mainTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab">
            <i class="bi bi-house-door me-2"></i>Home
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="lists-tab" data-bs-toggle="tab" data-bs-target="#lists" type="button" role="tab">
            <i class="bi bi-list-ul me-2"></i>Lists
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="winners-tab" data-bs-toggle="tab" data-bs-target="#winners" type="button" role="tab">
            <i class="bi bi-trophy me-2"></i>Winners
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="history-tab" data-bs-toggle="tab" data-bs-target="#history" type="button" role="tab">
            <i class="bi bi-clock-history me-2"></i>History
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab">
            <i class="bi bi-gear me-2"></i>Settings
          </button>
        </li>
      </ul>
      <!-- Tab Content -->
      <div class="tab-content" id="mainTabContent">
        <!-- Home Tab -->
        <div class="tab-pane fade show active" id="home" role="tabpanel">
          <div class="row">
            <div class="col-lg-4">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Random Selection</h5>
                  <div class="mb-3">
                    <label class="form-label">Current List</label>
                    <select class="form-select" id="currentListSelect">
                      <option value="">Select a list...</option>
                    </select>
                    <small class="text-muted" id="listInfo">No list selected</small>
                  </div>
                  <div class="mb-3">
                    <label class="form-label">Number of Winners</label>
                    <input type="number" class="form-control" id="numWinners" value="1" min="1">
                  </div>
                  <div class="mb-3">
                    <label class="form-label">Prize</label>
                    <select class="form-select" id="prizeSelect">
                      <option value="">Select a prize...</option>
                    </select>
                  </div>
                  <button class="btn btn-primary w-100 mb-3" id="selectWinnersBtn" disabled>
                    <i class="bi bi-shuffle me-2"></i>Select Winners
                  </button>
                  <button class="btn btn-outline-secondary w-100 mb-2" id="fullscreenBtn" disabled>
                    <i class="bi bi-fullscreen me-2"></i>Enter Presentation Mode
                  </button>
                  <button class="btn btn-outline-warning w-100" id="undoBtn" disabled>
                    <i class="bi bi-arrow-counterclockwise me-2"></i>Undo Last Selection
                  </button>
                </div>
              </div>
            </div>
            <div class="col-lg-8">
              <div id="winnerDisplay" class="d-none">
                <div class="winner-display" id="winnerDisplayContainer">
                  <div class="winner-prize" id="displayPrize"></div>
                  <div id="winnersList"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Lists Tab -->
        <div class="tab-pane fade" id="lists" role="tabpanel">
          <div class="row">
            <div class="col-lg-6">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Upload CSV List</h5>
                  <div class="mb-3">
                    <label class="form-label">List Name</label>
                    <input type="text" class="form-control" id="listName" placeholder="Enter list name">
                  </div>
                  <div class="mb-3">
                    <label class="form-label">CSV File</label>
                    <input type="file" class="form-control" id="csvFile" accept=".csv">
                  </div>
                  <button class="btn btn-primary" id="uploadBtn">
                    <i class="bi bi-upload me-2"></i>Upload List
                  </button>
                </div>
              </div>
              <!-- Data Preview Card -->
              <div class="card" id="dataPreviewCard" style="display: none;">
                <div class="card-body">
                  <h5 class="card-title">Data Preview</h5>
                  <div class="table-responsive">
                    <table class="table table-sm" id="previewTable">
                      <thead id="previewHeaders"></thead>
                      <tbody id="previewBody"></tbody>
                    </table>
                  </div>
                  <div class="d-flex justify-content-between">
                    <button class="btn btn-outline-secondary" id="cancelUpload">Cancel</button>
                    <button class="btn btn-success" id="confirmUpload">Confirm Upload</button>
                  </div>
                </div>
              </div>
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Name Display Configuration</h5>
                  <div id="nameConfig" class="d-none">
                    <div class="mb-3">
                      <label class="form-label">Select columns to display as name:</label>
                      <div id="columnSelectors"></div>
                    </div>
                    <button class="btn btn-success" id="saveConfigBtn">Save Configuration</button>
                  </div>
                  <div id="noListMessage" class="text-muted">Upload a CSV file to configure name display</div>
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Saved Lists</h5>
                  <div id="savedLists">
                    <p class="text-muted">No lists saved yet</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Winners Tab -->
        <div class="tab-pane fade" id="winners" role="tabpanel">
          <div class="card">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="card-title mb-0">Winners List</h5>
                <div>
                  <button class="btn btn-success me-2" id="exportWinnersBtn">
                    <i class="bi bi-download me-2"></i>Export CSV
                  </button>
                  <button class="btn btn-danger" id="clearWinnersBtn">
                    <i class="bi bi-trash me-2"></i>Clear All
                  </button>
                </div>
              </div>
              <div class="table-responsive">
                <table class="table table-striped">
                  <thead>
                    <tr id="winnersTableHeader">
                      <th>ID</th>
                      <th>Name</th>
                      <th>Prize</th>
                      <th>Date</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="winnersTableBody">
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <!-- History Tab -->
        <div class="tab-pane fade" id="history" role="tabpanel">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Selection History & Statistics</h5>
              <div class="history-stats" id="historyStats">
                <div class="stat-card">
                  <div class="stat-number" id="totalSelections">0</div>
                  <div class="stat-label">Total Selections</div>
                </div>
                <div class="stat-card">
                  <div class="stat-number" id="totalWinners">0</div>
                  <div class="stat-label">Total Winners</div>
                </div>
                <div class="stat-card">
                  <div class="stat-number" id="averageWinners">0</div>
                  <div class="stat-label">Avg Winners/Selection</div>
                </div>
                <div class="stat-card">
                  <div class="stat-number" id="mostUsedPrize">-</div>
                  <div class="stat-label">Most Used Prize</div>
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Filter by List</label>
                <select class="form-select" id="historyListFilter">
                  <option value="">All Lists</option>
                </select>
              </div>
              <div class="table-responsive">
                <table class="table table-striped">
                  <thead>
                    <tr>
                      <th>Date</th>
                      <th>List</th>
                      <th>Prize</th>
                      <th>Winners Count</th>
                      <th>Winners</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="historyTableBody">
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <!-- Settings Tab -->
        <div class="tab-pane fade" id="settings" role="tabpanel">
          <div class="row">
            <div class="col-lg-6">
              <!-- Display Settings -->
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Display Settings</h5>
                  <div class="mb-3">
                    <label class="form-label">
                      Winner Display Mode
                      <i class="bi bi-info-circle text-muted ms-1" data-bs-toggle="tooltip" title="Choose how winners are revealed in presentation mode"></i>
                    </label>
                    <select class="form-select" id="displayMode">
                      <option value="all-at-once">All at Once</option>
                      <option value="sequential">Sequential Reveal</option>
                      <option value="countdown">Countdown Timer</option>
                    </select>
                  </div>
                  <div class="mb-3" id="durationSettings">
                    <label class="form-label" for="displayDuration">
                      Animation Duration (seconds)
                      <i class="bi bi-info-circle text-muted ms-1" data-bs-toggle="tooltip" title="Time for each winner animation or total reveal time"></i>
                    </label>
                    <input type="number" class="form-control" id="displayDuration" value="3" min="1" max="30">
                  </div>
                  <div class="mb-3" id="countdownSettings" style="display: none;">
                    <label class="form-label">
                      Countdown Duration (seconds)
                      <i class="bi bi-info-circle text-muted ms-1" data-bs-toggle="tooltip" title="Countdown time before revealing winners"></i>
                    </label>
                    <input type="number" class="form-control" id="countdownDuration" value="5" min="3" max="10">
                  </div>
                  <div class="mb-3">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="preventDuplicates">
                      <label class="form-check-label" for="preventDuplicates">
                        Remove winners from source list
                        <i class="bi bi-info-circle text-muted ms-1" data-bs-toggle="tooltip" title="Prevent the same person from winning multiple times"></i>
                      </label>
                    </div>
                  </div>
                  <div class="mb-3">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="enableSoundEffects">
                      <label class="form-check-label" for="enableSoundEffects">
                        Enable Sound Effects
                        <i class="bi bi-info-circle text-muted ms-1" data-bs-toggle="tooltip" title="Play sound when winners are selected"></i>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Theme Settings -->
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Theme & Appearance</h5>
                  <div class="mb-3">
                    <label class="form-label">
                      Font Family
                      <i class="bi bi-info-circle text-muted ms-1" data-bs-toggle="tooltip" title="Choose the main font for the application"></i>
                    </label>
                    <select class="form-select" id="fontFamily">
                      <option value="Inter">Inter</option>
                      <option value="Roboto">Roboto</option>
                      <option value="Open Sans">Open Sans</option>
                      <option value="Lato">Lato</option>
                      <option value="Poppins">Poppins</option>
                    </select>
                  </div>
                  <div class="mb-3">
                    <label class="form-label">Theme Colors</label>
                    <div class="row">
                      <div class="col-6">
                        <label class="form-label">Primary Color</label>
                        <input type="color" class="form-control color-input" id="primaryColor" value="#6366f1">
                      </div>
                      <div class="col-6">
                        <label class="form-label">Secondary Color</label>
                        <input type="color" class="form-control color-input" id="secondaryColor" value="#8b5cf6">
                      </div>
                    </div>
                  </div>
                  <div class="mb-3">
                    <label class="form-label">
                      Background Type
                      <i class="bi bi-info-circle text-muted ms-1" data-bs-toggle="tooltip" title="Choose background style for winner display"></i>
                    </label>
                    <select class="form-select" id="backgroundType">
                      <option value="gradient">Gradient</option>
                      <option value="solid">Solid Color</option>
                      <option value="image">Custom Image</option>
                    </select>
                  </div>
                  <div class="mb-3" id="backgroundImageUpload" style="display: none;">
                    <label class="form-label">Background Image</label>
                    <input type="file" class="form-control" id="backgroundImage" accept="image/*">
                    <small class="text-muted">Recommended: 1920x1080 or higher resolution</small>
                  </div>
                  <button class="btn btn-primary" id="saveThemeBtn">Save Theme</button>
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <!-- Prize Management -->
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Prize Management</h5>
                  <div class="mb-3">
                    <div class="input-group">
                      <input type="text" class="form-control" id="prizeName" placeholder="Prize name">
                      <input type="number" class="form-control" id="prizeQuantity" placeholder="Quantity" min="1">
                      <button class="btn btn-primary" id="addPrizeBtn">
                        <i class="bi bi-plus"></i>
                      </button>
                    </div>
                  </div>
                  <div id="prizesList">
                    <p class="text-muted">No prizes added yet</p>
                  </div>
                </div>
              </div>
              <!-- Theme Presets -->
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Theme Presets</h5>
                  <div class="row g-2">
                    <div class="col-4">
                      <button class="btn btn-outline-primary w-100 theme-preset" data-theme="default">
                        <i class="bi bi-palette me-1"></i>Default
                      </button>
                    </div>
                    <div class="col-4">
                      <button class="btn btn-outline-success w-100 theme-preset" data-theme="emerald">
                        <i class="bi bi-gem me-1"></i>Emerald
                      </button>
                    </div>
                    <div class="col-4">
                      <button class="btn btn-outline-danger w-100 theme-preset" data-theme="ruby">
                        <i class="bi bi-heart-fill me-1"></i>Ruby
                      </button>
                    </div>
                    <div class="col-4">
                      <button class="btn btn-outline-warning w-100 theme-preset" data-theme="gold">
                        <i class="bi bi-star-fill me-1"></i>Gold
                      </button>
                    </div>
                    <div class="col-4">
                      <button class="btn btn-outline-info w-100 theme-preset" data-theme="ocean">
                        <i class="bi bi-water me-1"></i>Ocean
                      </button>
                    </div>
                    <div class="col-4">
                      <button class="btn btn-outline-secondary w-100 theme-preset" data-theme="corporate">
                        <i class="bi bi-building me-1"></i>Corporate
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="text-center mt-4">
            <button class="btn btn-success btn-lg" id="saveSettingsBtn">
              <i class="bi bi-check-lg me-2"></i>Save All Settings
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Progress Overlay -->
  <div id="progressOverlay" class="progress-overlay d-none">
    <div class="progress-content">
      <h5 id="progressTitle">Processing...</h5>
      <div class="progress-bar-custom">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <p id="progressText">Please wait...</p>
    </div>
  </div>
  <!-- Fullscreen Winner Display -->
  <div id="fullscreenDisplay" class="fullscreen-mode d-none">
    <div class="fullscreen-winner">
      <!-- Countdown Display -->
      <div id="countdownDisplay" class="countdown-display d-none">
        <div class="countdown-text">Get Ready!</div>
        <div class="countdown-number" id="countdownNumber">3</div>
        <div class="countdown-subtext">Selecting winners...</div>
      </div>
      <!-- Winner Display -->
      <div id="fullscreenContent" class="d-none">
        <div class="winner-prize" id="fullscreenPrize"></div>
        <div id="fullscreenWinnersList"></div>
      </div>
      <button class="btn btn-outline-light btn-lg mt-4" id="exitFullscreenBtn">
        <i class="bi bi-fullscreen-exit me-2"></i>Exit Presentation Mode
      </button>
    </div>
  </div>
  <!-- Hidden file input for restore -->
  <input type="file" id="restoreFileInput" accept=".json" style="display: none;">
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Toastify JS -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <!-- Custom JavaScript -->
  <script src="app.js"></script>
</body>
</html>