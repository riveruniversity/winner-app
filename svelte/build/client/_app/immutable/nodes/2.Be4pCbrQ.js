var Ki=Object.defineProperty;var Si=a=>{throw TypeError(a)};var Ji=(a,e,t)=>e in a?Ki(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var vt=(a,e,t)=>Ji(a,typeof e!="symbol"?e+"":e,t),Zi=(a,e,t)=>e.has(a)||Si("Cannot "+t);var q=(a,e,t)=>(Zi(a,e,"read from private field"),t?t.call(a):e.get(a)),Oe=(a,e,t)=>e.has(a)?Si("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t);import{f as w,a as f,c as Pe}from"../chunks/C9l5s-G2.js";import{i as Ai}from"../chunks/_zSwu-Av.js";import{h as Re,a as Xi,b as ji,w as y,au as $i,r as ea,H as ta,s as zi,c as jt,d as $t,k as Wt,Z as ia,ak as aa,a4 as ki,e as sa,j as ii,l as ra,ai as ri,aH as Ni,V as ai,aE as na,aI as la,aJ as oa,aK as da,i as ei,aL as Ye,f as Mi,p as Wi,aM as ti,ae as ca,ah as va,g as ua,N as _a,aN as Oi,Y as Ri,aO as fa,aP as pa,aQ as ba,aR as ha,aS as ga,aT as ma,aU as ya,aV as wa,L as Be,J as Ge,K as yt,A as Bi,B as me,I as r,F as s,G as i,a5 as _t,C as pe,D as qi,an as Ia}from"../chunks/BnDB5uks.js";import{d as Vi,s as k}from"../chunks/K-F0D8fa.js";import{i as A}from"../chunks/CCWg9zk2.js";import{a as ut,p as It,s as Ot}from"../chunks/DKDtmMO5.js";import{_ as Ta}from"../chunks/D0WHf5NO.js";let Pi=!1;function xa(){Pi||(Pi=!0,document.addEventListener("reset",a=>{Promise.resolve().then(()=>{var e;if(!a.defaultPrevented)for(const t of a.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function Sa(a,e,t){for(var n=[],u=e.length,b,o=e.length,h=0;h<u;h++){let T=e[h];Wi(T,()=>{if(b){if(b.pending.delete(T),b.done.add(T),b.pending.size===0){var m=a.outrogroups;si(ri(b.done)),m.delete(b),m.size===0&&(a.outrogroups=null)}}else o-=1},!1)}if(o===0){var d=n.length===0&&t!==null;if(d){var p=t,_=p.parentNode;va(_),_.append(p),a.items.clear()}si(e,!d)}else b={pending:new Set(e),done:new Set},(a.outrogroups??(a.outrogroups=new Set)).add(b)}function si(a,e=!0){for(var t=0;t<a.length;t++)ua(a[t],e)}var Ci;function ft(a,e,t,n,u,b=null){var o=a,h=new Map,d=(e&Oi)!==0;if(d){var p=a;o=Re?jt(_a(p)):p.appendChild(ei())}Re&&Xi();var _=null,T=$i(()=>{var g=t();return Ni(g)?g:g==null?[]:ri(g)}),m,x=!0;function ae(){l.fallback=_,za(l,m,o,e,n),_!==null&&(m.length===0?(_.f&Ye)===0?Mi(_):(_.f^=Ye,wt(_,null,o)):Wi(_,()=>{_=null}))}var be=ji(()=>{m=y(T);var g=m.length;let le=!1;if(Re){var X=ea(o)===ta;X!==(g===0)&&(o=zi(),jt(o),$t(!1),le=!0)}for(var R=new Set,se=sa,K=ra(),M=0;M<g;M+=1){Re&&Wt.nodeType===ia&&Wt.data===aa&&(o=Wt,le=!0,$t(!1));var j=m[M],O=n(j,M),N=x?null:h.get(O);N?(N.v&&ki(N.v,j),N.i&&ki(N.i,M),K&&se.skipped_effects.delete(N.e)):(N=ka(h,x?o:Ci??(Ci=ei()),j,O,M,u,e,t),x||(N.e.f|=Ye),h.set(O,N)),R.add(O)}if(g===0&&b&&!_&&(x?_=ii(()=>b(o)):(_=ii(()=>b(Ci??(Ci=ei()))),_.f|=Ye)),Re&&g>0&&jt(zi()),!x)if(K){for(const[he,oe]of h)R.has(he)||se.skipped_effects.add(oe.e);se.oncommit(ae),se.ondiscard(()=>{})}else ae();le&&$t(!0),y(T)}),l={effect:be,items:h,outrogroups:null,fallback:_};x=!1,Re&&(o=Wt)}function za(a,e,t,n,u){var N,he,oe,ye,we,Ce,qe,de,Ie;var b=(n&fa)!==0,o=e.length,h=a.items,d=a.effect.first,p,_=null,T,m=[],x=[],ae,be,l,g;if(b)for(g=0;g<o;g+=1)ae=e[g],be=u(ae,g),l=h.get(be).e,(l.f&Ye)===0&&((he=(N=l.nodes)==null?void 0:N.a)==null||he.measure(),(T??(T=new Set)).add(l));for(g=0;g<o;g+=1){if(ae=e[g],be=u(ae,g),l=h.get(be).e,a.outrogroups!==null)for(const V of a.outrogroups)V.pending.delete(l),V.done.delete(l);if((l.f&Ye)!==0)if(l.f^=Ye,l===d)wt(l,null,t);else{var le=_?_.next:d;l===a.effect.last&&(a.effect.last=l.prev),l.prev&&(l.prev.next=l.next),l.next&&(l.next.prev=l.prev),je(a,_,l),je(a,l,le),wt(l,le,t),_=l,m=[],x=[],d=_.next;continue}if((l.f&ti)!==0&&(Mi(l),b&&((ye=(oe=l.nodes)==null?void 0:oe.a)==null||ye.unfix(),(T??(T=new Set)).delete(l))),l!==d){if(p!==void 0&&p.has(l)){if(m.length<x.length){var X=x[0],R;_=X.prev;var se=m[0],K=m[m.length-1];for(R=0;R<m.length;R+=1)wt(m[R],X,t);for(R=0;R<x.length;R+=1)p.delete(x[R]);je(a,se.prev,K.next),je(a,_,se),je(a,K,X),d=X,_=K,g-=1,m=[],x=[]}else p.delete(l),wt(l,d,t),je(a,l.prev,l.next),je(a,l,_===null?a.effect.first:_.next),je(a,_,l),_=l;continue}for(m=[],x=[];d!==null&&d!==l;)(p??(p=new Set)).add(d),x.push(d),d=d.next;if(d===null)continue}(l.f&Ye)===0&&m.push(l),_=l,d=l.next}if(a.outrogroups!==null){for(const V of a.outrogroups)V.pending.size===0&&(si(ri(V.done)),(we=a.outrogroups)==null||we.delete(V));a.outrogroups.size===0&&(a.outrogroups=null)}if(d!==null||p!==void 0){var M=[];if(p!==void 0)for(l of p)(l.f&ti)===0&&M.push(l);for(;d!==null;)(d.f&ti)===0&&d!==a.fallback&&M.push(d),d=d.next;var j=M.length;if(j>0){var O=(n&Oi)!==0&&o===0?t:null;if(b){for(g=0;g<j;g+=1)(qe=(Ce=M[g].nodes)==null?void 0:Ce.a)==null||qe.measure();for(g=0;g<j;g+=1)(Ie=(de=M[g].nodes)==null?void 0:de.a)==null||Ie.fix()}Sa(a,M,O)}}b&&Ri(()=>{var V,Ee;if(T!==void 0)for(l of T)(Ee=(V=l.nodes)==null?void 0:V.a)==null||Ee.apply()})}function ka(a,e,t,n,u,b,o,h){var d=(o&oa)!==0?(o&da)===0?na(t,!1,!1):ai(t):null,p=(o&la)!==0?ai(u):null;return{v:d,i:p,e:ii(()=>(b(e,d??t,p??u,h),()=>{a.delete(n)}))}}function wt(a,e,t){if(a.nodes)for(var n=a.nodes.start,u=a.nodes.end,b=e&&(e.f&Ye)===0?e.nodes.start:t;n!==null;){var o=ca(n);if(b.before(n),n===u)return;n=o}}function je(a,e,t){e===null?a.effect.first=t:e.next=t,t===null?a.effect.last=e:t.prev=e}const Ei=[...` 	
\r\fÂ \v\uFEFF`];function Pa(a,e,t){var n=a==null?"":""+a;if(t){for(var u in t)if(t[u])n=n?n+" "+u:u;else if(n.length)for(var b=u.length,o=0;(o=n.indexOf(u,o))>=0;){var h=o+b;(o===0||Ei.includes(n[o-1]))&&(h===n.length||Ei.includes(n[h]))?n=(o===0?"":n.substring(0,o))+n.substring(h+1):o=h}}return n===""?null:n}function lt(a,e,t,n,u,b){var o=a.__className;if(Re||o!==t||o===void 0){var h=Pa(t,n,b);(!Re||h!==a.getAttribute("class"))&&(h==null?a.removeAttribute("class"):a.className=h),a.__className=t}else if(b&&u!==b)for(var d in b){var p=!!b[d];(u==null||p!==!!u[d])&&a.classList.toggle(d,p)}return b}function Qe(a,e,t=!1){if(a.multiple){if(e==null)return;if(!Ni(e))return ba();for(var n of a.options)n.selected=e.includes(Li(n));return}for(n of a.options){var u=Li(n);if(ha(u,e)){n.selected=!0;return}}(!t||e!==void 0)&&(a.selectedIndex=-1)}function $e(a){var e=new MutationObserver(()=>{Qe(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),pa(()=>{e.disconnect()})}function Li(a){return"__value"in a?a.__value:a.value}const Ca=Symbol("is custom element"),Ea=Symbol("is html");function Ae(a){if(Re){var e=!1,t=()=>{if(!e){if(e=!0,a.hasAttribute("value")){var n=a.value;Rt(a,"value",null),a.value=n}if(a.hasAttribute("checked")){var u=a.checked;Rt(a,"checked",null),a.checked=u}}};a.__on_r=t,Ri(t),xa()}}function pt(a,e){var t=ni(a);t.value===(t.value=e??void 0)||a.value===e&&(e!==0||a.nodeName!=="PROGRESS")||(a.value=e??"")}function Tt(a,e){var t=ni(a);t.checked!==(t.checked=e??void 0)&&(a.checked=e)}function Rt(a,e,t,n){var u=ni(a);Re&&(u[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||u[e]!==(u[e]=t)&&(e==="loading"&&(a[ma]=t),t==null?a.removeAttribute(e):typeof t!="string"&&La(a).includes(e)?a[e]=t:a.setAttribute(e,t))}function ni(a){return a.__attributes??(a.__attributes={[Ca]:a.nodeName.includes("-"),[Ea]:a.namespaceURI===ga})}var Di=new Map;function La(a){var e=a.getAttribute("is")||a.nodeName,t=Di.get(e);if(t)return t;Di.set(e,t=[]);for(var n,u=a,b=Element.prototype;b!==u;){n=wa(u);for(var o in n)n[o].set&&t.push(o);u=ya(u)}return t}function li(a){var e=ai(0);return function(){return arguments.length===1?(Be(e,y(e)+1),arguments[0]):(y(e),a())}}const Da={lists:"listId",prizes:"prizeId",winners:"winnerId",history:"historyId"};var xt,St,zt,kt,Pt;class Aa{constructor(){Oe(this,xt,Ge(yt([])));Oe(this,St,Ge(yt([])));Oe(this,zt,Ge(yt([])));Oe(this,kt,Ge(yt([])));Oe(this,Pt,Ge(yt({lists:!1,prizes:!1,winners:!1,history:!1})))}get lists(){return y(q(this,xt))}set lists(e){Be(q(this,xt),e,!0)}get prizes(){return y(q(this,St))}set prizes(e){Be(q(this,St),e,!0)}get winners(){return y(q(this,zt))}set winners(e){Be(q(this,zt),e,!0)}get history(){return y(q(this,kt))}set history(e){Be(q(this,kt),e,!0)}get loading(){return y(q(this,Pt))}set loading(e){Be(q(this,Pt),e,!0)}async load(e){this.loading[e]=!0;try{switch(e){case"lists":this.lists=await ut.getLists();break;case"prizes":this.prizes=await ut.getPrizes();break;case"winners":this.winners=await ut.getWinners();break;case"history":this.history=await ut.getHistory();break}}catch(t){throw console.error(`Error loading ${e}:`,t),t}finally{this.loading[e]=!1}}async loadAll(){await Promise.all([this.load("lists"),this.load("prizes"),this.load("winners"),this.load("history")])}async save(e,t){await ut.save(e,t),await this.load(e)}async delete(e,t){await ut.delete(e,t),await this.load(e)}getById(e,t){const n=Da[e];return this[e].find(b=>b[n]===t)}getListById(e){return this.lists.find(t=>t.listId===e)}getPrizeById(e){return this.prizes.find(t=>t.prizeId===e)}getWinnerById(e){return this.winners.find(t=>t.winnerId===e)}getHistoryById(e){return this.history.find(t=>t.historyId===e)}async toggleWinnerPickup(e){const t=this.getWinnerById(e);if(!t)throw new Error(`Winner ${e} not found`);const n={...t,pickedUp:!t.pickedUp,pickupTimestamp:t.pickedUp?void 0:Date.now(),pickupStation:t.pickedUp?void 0:"Manual"};await this.save("winners",n)}async updateWinnerSmsStatus(e,t,n){const u=this.getWinnerById(e);if(!u)throw new Error(`Winner ${e} not found`);const b={...u,sms:{status:t,messageId:n,timestamp:Date.now()}};await this.save("winners",b)}}xt=new WeakMap,St=new WeakMap,zt=new WeakMap,kt=new WeakMap,Pt=new WeakMap;const I=new Aa;class Na{constructor(){vt(this,"_selectedListIds",It("setup_selectedListIds",[]));vt(this,"_selectedPrizeId",It("setup_selectedPrizeId",""));vt(this,"_winnersCount",It("setup_winnersCount",1))}get selectedListIds(){return this._selectedListIds.current}set selectedListIds(e){this._selectedListIds.current=e}get selectedPrizeId(){return this._selectedPrizeId.current}set selectedPrizeId(e){this._selectedPrizeId.current=e}get winnersCount(){return this._winnersCount.current}set winnersCount(e){this._winnersCount.current=e}get eligibleEntries(){var u,b;const e=this._selectedListIds.current,t=this._selectedPrizeId.current;let n=e.reduce((o,h)=>{var p;const d=I.lists.find(_=>_.listId===h);return o+(((p=d==null?void 0:d.entries)==null?void 0:p.length)||0)},0);if(Ot.preventSamePrize&&t){const o=I.prizes.find(d=>d.prizeId===t),h=o==null?void 0:o.name;if(h&&I.winners.length>0){const d=new Set(I.winners.filter(p=>p.prize===h).map(p=>p.entryId).filter(Boolean));if(d.size>0){let p=0;for(const _ of e){const T=I.lists.find(m=>m.listId===_);if(T!=null&&T.entries)for(const m of T.entries){const x=m.id||((u=m.data)==null?void 0:u["Ticket Code"])||((b=m.data)==null?void 0:b.ticketCode);(!x||!d.has(x))&&p++}}n=p}}}return n}get excludedCount(){var h,d;const e=this._selectedPrizeId.current,t=this._selectedListIds.current;if(!Ot.preventSamePrize||!e)return 0;const n=I.prizes.find(p=>p.prizeId===e),u=n==null?void 0:n.name;if(!u||I.winners.length===0)return 0;const b=new Set(I.winners.filter(p=>p.prize===u).map(p=>p.entryId).filter(Boolean));let o=0;for(const p of t){const _=I.lists.find(T=>T.listId===p);if(_!=null&&_.entries)for(const T of _.entries){const m=T.id||((h=T.data)==null?void 0:h["Ticket Code"])||((d=T.data)==null?void 0:d.ticketCode);m&&b.has(m)&&o++}}return o}get canStart(){return this._selectedListIds.current.length>0&&!!this._selectedPrizeId.current}get listDisplayText(){var t;const e=this._selectedListIds.current;if(e.length===0)return"Not Selected";if(e.length===1){const n=I.lists.find(u=>u.listId===e[0]);return((t=n==null?void 0:n.metadata)==null?void 0:t.name)||"Unknown"}return`${e.length} Lists Selected`}get prizeDisplayText(){const e=this._selectedPrizeId.current;if(!e)return"Not Selected";const t=I.prizes.find(n=>n.prizeId===e);return(t==null?void 0:t.name)||"Not Selected"}get selectedPrizeQuantity(){const e=this._selectedPrizeId.current;if(!e)return null;const t=I.prizes.find(n=>n.prizeId===e);return(t==null?void 0:t.quantity)??null}get entriesExceeded(){return this._selectedListIds.current.length===0?!1:this._winnersCount.current>this.eligibleEntries}get prizeQuantityExceeded(){const e=this.selectedPrizeQuantity;return e===null?!1:this._winnersCount.current>e}get hasValidationWarning(){return this.entriesExceeded||this.prizeQuantityExceeded}get validSelectedCount(){const e=I.lists.map(t=>t.listId);return this._selectedListIds.current.filter(t=>e.includes(t)).length}isListSelected(e){return this._selectedListIds.current.includes(e)}toggleList(e){const t=this._selectedListIds.current;t.includes(e)?this.selectedListIds=t.filter(n=>n!==e):this.selectedListIds=[...t,e]}selectList(e){this._selectedListIds.current.includes(e)||(this.selectedListIds=[...this._selectedListIds.current,e])}deselectList(e){this._selectedListIds.current.includes(e)&&(this.selectedListIds=this._selectedListIds.current.filter(t=>t!==e))}onPrizeChange(){const e=this._selectedPrizeId.current;if(e){const t=I.prizes.find(n=>n.prizeId===e);t!=null&&t.winnersCount&&(this.winnersCount=t.winnersCount)}this.capWinnersCount()}capWinnersCount(){const e=this._winnersCount.current;this.eligibleEntries>0&&e>this.eligibleEntries&&(this.winnersCount=this.eligibleEntries);const t=this.selectedPrizeQuantity;t!==null&&this._winnersCount.current>t&&(this.winnersCount=t)}clearSelections(){this._selectedListIds.reset(),this._selectedPrizeId.reset(),this._winnersCount.reset()}}const Ue=new Na;var Ct,Et,Lt,Dt;class Ma{constructor(){vt(this,"_view",It("ui_view","public"));vt(this,"_currentTab",It("ui_currentTab","quicksetup"));Oe(this,Ct,Ge(!1));Oe(this,Et,Ge("Processing..."));Oe(this,Lt,Ge("Please wait..."));Oe(this,Dt,Ge(0))}get _showProgress(){return y(q(this,Ct))}set _showProgress(e){Be(q(this,Ct),e,!0)}get _progressTitle(){return y(q(this,Et))}set _progressTitle(e){Be(q(this,Et),e,!0)}get _progressText(){return y(q(this,Lt))}set _progressText(e){Be(q(this,Lt),e,!0)}get _progressPercent(){return y(q(this,Dt))}set _progressPercent(e){Be(q(this,Dt),e,!0)}get view(){return this._view.current}set view(e){this._view.current=e}get currentTab(){return this._currentTab.current}set currentTab(e){this._currentTab.current=e}get showProgress(){return this._showProgress}set showProgress(e){this._showProgress=e}get progressTitle(){return this._progressTitle}set progressTitle(e){this._progressTitle=e}get progressText(){return this._progressText}set progressText(e){this._progressText=e}get progressPercent(){return this._progressPercent}set progressPercent(e){this._progressPercent=e}showManagement(){this.view="management"}showPublic(){this.view="public",this.currentTab="quicksetup"}setTab(e){this.currentTab=e}startProgress(e,t="Please wait..."){this.progressTitle=e,this.progressText=t,this.progressPercent=0,this.showProgress=!0}updateProgress(e,t){this.progressPercent=e,t&&(this.progressText=t)}endProgress(){this.showProgress=!1,this.progressPercent=0}openModal(e){{const t=document.getElementById(e);t&&t.click()}}async restoreTab(){if(this.view!=="management")return;await new Promise(t=>setTimeout(t,100));const e=document.querySelector(`[data-bs-target="#${this.currentTab}"]`);e&&(await Ta(()=>import("../chunks/ifhUiil8.js"),[],import.meta.url)).Tab.getOrCreateInstance(e).show()}resetNavigation(){this._view.reset(),this._currentTab.reset()}}Ct=new WeakMap,Et=new WeakMap,Lt=new WeakMap,Dt=new WeakMap;const W=new Ma;var z=li(()=>Ue),c=li(()=>Ot),Wa=w('<p class="text-muted mb-0">No lists uploaded yet</p>'),Oa=w('<div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label"> <span class="text-muted"> </span></label></div>'),Ra=w("<option> </option>"),Ba=w('<small class="text-danger d-block mt-1"> </small>'),qa=w('<small class="text-danger d-block mt-1"> </small>'),Va=w('<div class="mb-3"><div class="form-check form-switch"><input class="form-check-input" type="checkbox" id="stableGrid"/> <label class="form-check-label fw-semibold" for="stableGrid">Stable Grid <i class="bi bi-info-circle text-muted ms-1" title="Pre-position all cards to prevent grid shifting during reveal"></i></label></div></div>'),Ha=w('<div class="card"><div class="card-header"><h5 class="card-title mb-0"><i class="bi bi-gear-fill me-2"></i>Quick Selection Setup</h5></div> <div class="card-body"><p class="card-text text-muted mb-4">Configure the next public winner selection from here.</p> <div class="row g-3"><div class="col-md-5"><label class="form-label fw-semibold">Select Lists</label> <div class="list-selection-container"><div class="border rounded p-2" style="max-height: 200px; overflow-y: auto;"><!></div> <div class="d-flex justify-content-between align-items-center mt-2"><div class="list-selection-controls"><button type="button" class="btn btn-sm btn-outline-primary">Select All</button> <button type="button" class="btn btn-sm btn-outline-secondary">Clear All</button> <span class="ms-2 text-muted"> </span></div> <small class="text-muted"> </small></div></div></div> <div class="col-md-5"><label class="form-label fw-semibold">Select Prize</label> <select class="form-select form-select-lg"><option>Select Prize...</option><!></select></div> <div class="col-md-2"><label class="form-label fw-semibold">Number of Winners</label> <input type="number" min="1" max="9999" placeholder="Count"/> <!></div></div></div></div> <div class="row g-4 mt-3"><div class="col-lg-6"><div class="card h-100"><div class="card-header"><h5 class="card-title mb-0"><i class="bi bi-eye-fill me-2"></i>Reveal Settings</h5></div> <div class="card-body"><div class="mb-3"><label class="form-label fw-semibold">Selection Mode</label> <select class="form-select form-select-lg"><option>All at Once</option><option>Sequential Reveal</option><option>Individual Selection</option></select></div> <div class="mb-3"><label class="form-label fw-semibold">Display Effect</label> <select class="form-select form-select-lg"><option>Fade In</option><option>Fly In</option><option>Zoom In</option><option>Slide In</option><option>Bounce In</option></select></div> <div class="mb-3"><label class="form-label fw-semibold">Time Between Winners (seconds)</label> <input type="number" class="form-control form-control-lg" min="0.1" max="5" step="0.1"/></div> <!></div></div></div> <div class="col-lg-6"><div class="card h-100"><div class="card-header"><h5 class="card-title mb-0"><i class="bi bi-clock-fill me-2"></i>Delay Settings</h5></div> <div class="card-body"><div class="mb-3"><label class="form-label fw-semibold">Delay Duration (seconds)</label> <input type="number" class="form-control form-control-lg" min="0" max="30" step="0.5"/></div> <div class="mb-3"><label class="form-label fw-semibold">Delay Visual</label> <select class="form-select form-select-lg"><option>No Visual (Silent)</option><option>Countdown Timer</option><option>Particle Animation</option><option>Swirl Animation</option><option>Christmas Snow</option><option>Time Machine</option></select></div> <div><button type="button" class="btn btn-outline-info"><i class="bi bi-eye me-1"></i>Preview Delay</button></div></div></div></div></div> <div class="row g-4 mt-3"><div class="col-lg-6"><div class="card h-100"><div class="card-header"><h5 class="card-title mb-0"><i class="bi bi-star-fill me-2"></i>Celebration Effects</h5></div> <div class="card-body"><div class="mb-3"><label class="form-label fw-semibold">Celebration Animation</label> <select class="form-select form-select-lg"><option>No Animation</option><option>Confetti</option><option>Gold Coins</option><option>Both Confetti & Coins</option></select></div> <div class="mb-3"><label class="form-label fw-semibold">Animation Duration (seconds)</label> <input type="number" class="form-control form-control-lg" min="1" max="10" step="0.5"/></div> <div class="mb-3"><div class="form-check"><input class="form-check-input" type="checkbox" id="celebrationAutoTrigger"/> <label class="form-check-label" for="celebrationAutoTrigger">Auto-trigger celebration when winners are revealed</label></div></div> <div><button type="button" class="btn btn-sm btn-outline-secondary"><i class="bi bi-play-fill me-1"></i>Test Celebration</button></div></div></div></div> <div class="col-lg-6"><div class="card h-100"><div class="card-header"><h5 class="card-title mb-0"><i class="bi bi-volume-up-fill me-2"></i>Sound Settings</h5></div> <div class="card-body"><div class="mb-3"><label class="form-label fw-semibold">Sound During Delay</label> <div class="input-group"><select class="form-select form-select-lg"><option>No Sound</option><option>Drumroll</option><option>Suspense</option><option>Ticking</option></select> <button type="button" class="btn btn-outline-secondary"><i class="bi bi-play-fill"></i> Test</button></div></div> <div class="mb-3"><label class="form-label fw-semibold">Sound at End of Delay</label> <div class="input-group"><select class="form-select form-select-lg"><option>No Sound</option><option>Ding</option><option>Bell</option><option>Gong</option></select> <button type="button" class="btn btn-outline-secondary"><i class="bi bi-play-fill"></i> Test</button></div></div> <div class="mb-3"><label class="form-label fw-semibold">Sound During Reveal</label> <div class="input-group"><select class="form-select form-select-lg"><option>No Sound</option><option>Fanfare</option><option>Applause</option><option>Celebration</option></select> <button type="button" class="btn btn-outline-secondary"><i class="bi bi-play-fill"></i> Test</button></div></div></div></div></div></div>',1);function Fa(a,e){Bi(e,!1);function t(){for(const v of I.lists)z().selectList(v.listId)}function n(){z(z().selectedListIds=[])}function u(v){const L=v.currentTarget;z(z().selectedPrizeId=L.value),z().onPrizeChange()}function b(v){const L=v.currentTarget;z(z().winnersCount=parseInt(L.value)||1)}Ai();var o=Ha(),h=me(o),d=r(s(h),2),p=r(s(d),2),_=s(p),T=r(s(_),2),m=s(T),x=s(m);{var ae=v=>{var L=Wa();f(v,L)},be=v=>{var L=Pe(),_e=me(L);ft(_e,1,()=>I.lists,De=>De.listId,(De,ne)=>{var rt=Oa(),nt=s(rt);Ae(nt),nt.__change=()=>z().toggleList(y(ne).listId);var Xt=r(nt,2),Ii=s(Xt),Ti=r(Ii),Gi=s(Ti);i(Ti),i(Xt),i(rt),pe(Yi=>{var xi;Rt(nt,"id",`list-${y(ne).listId??""}`),Tt(nt,Yi),Rt(Xt,"for",`list-${y(ne).listId??""}`),k(Ii,`${y(ne).metadata.name??""} `),k(Gi,`(${(((xi=y(ne).entries)==null?void 0:xi.length)||0)??""})`)},[()=>z().isListSelected(y(ne).listId)]),f(De,rt)}),f(v,L)};A(x,v=>{I.lists.length===0?v(ae):v(be,!1)})}i(m);var l=r(m,2),g=s(l),le=s(g);le.__click=t;var X=r(le,2);X.__click=n;var R=r(X,2),se=s(R);i(R),i(g);var K=r(g,2),M=s(K);i(K),i(l),i(T),i(_);var j=r(_,2),O=r(s(j),2);O.__change=u;var N=s(O);N.value=N.__value="";var he=r(N);ft(he,1,()=>I.prizes,v=>v.prizeId,(v,L)=>{var _e=Ra(),De=s(_e);i(_e);var ne={};pe(()=>{k(De,`${y(L).name??""} (${y(L).quantity??""} available)`),ne!==(ne=y(L).prizeId)&&(_e.value=(_e.__value=y(L).prizeId)??"")}),f(v,_e)}),i(O);var oe;$e(O),i(j);var ye=r(j,2),we=r(s(ye),2);Ae(we);let Ce;we.__change=b;var qe=r(we,2);{var de=v=>{var L=Ba(),_e=s(L,!0);i(L),pe(()=>k(_e,z().eligibleEntries===0?"No entries available":`Only ${z().eligibleEntries} entries available${z().excludedCount>0?` (${z().excludedCount} excluded)`:""}`)),f(v,L)},Ie=v=>{var L=Pe(),_e=me(L);{var De=ne=>{var rt=qa(),nt=s(rt);i(rt),pe(()=>k(nt,`Only ${z().selectedPrizeQuantity??""} prizes available`)),f(ne,rt)};A(_e,ne=>{z().prizeQuantityExceeded&&ne(De)},!0)}f(v,L)};A(qe,v=>{z().entriesExceeded?v(de):v(Ie,!1)})}i(ye),i(p),i(d),i(h);var V=r(h,2),Ee=s(V),Ve=s(Ee),ot=r(s(Ve),2),bt=s(ot),He=r(s(bt),2);He.__change=v=>c(c().selectionMode=v.currentTarget.value);var Ne=s(He);Ne.value=Ne.__value="all-at-once";var dt=r(Ne);dt.value=dt.__value="sequential";var At=r(dt);At.value=At.__value="individual",i(He);var Nt;$e(He),i(bt);var ht=r(bt,2),ce=r(s(ht),2);ce.__change=v=>c(c().displayEffect=v.currentTarget.value);var Me=s(ce);Me.value=Me.__value="fade-in";var Ke=r(Me);Ke.value=Ke.__value="fly-in";var et=r(Ke);et.value=et.__value="zoom-in";var tt=r(et);tt.value=tt.__value="slide-in";var Le=r(tt);Le.value=Le.__value="bounce-in",i(ce);var $;$e(ce),i(ht);var ge=r(ht,2),Fe=r(s(ge),2);Ae(Fe),Fe.__change=v=>c(c().displayDuration=parseFloat(v.currentTarget.value)),i(ge);var it=r(ge,2);{var Te=v=>{var L=Va(),_e=s(L),De=s(_e);Ae(De),De.__change=ne=>c(c().stableGrid=ne.currentTarget.checked),_t(2),i(_e),i(L),pe(()=>Tt(De,c().stableGrid)),f(v,L)};A(it,v=>{(c().selectionMode==="sequential"||c().selectionMode==="individual")&&v(Te)})}i(ot),i(Ve),i(Ee);var D=r(Ee,2),H=s(D),xe=r(s(H),2),Se=s(xe),F=r(s(Se),2);Ae(F),F.__change=v=>c(c().preSelectionDelay=parseFloat(v.currentTarget.value)),i(Se);var S=r(Se,2),P=r(s(S),2);P.__change=v=>c(c().delayVisualType=v.currentTarget.value);var J=s(P);J.value=J.__value="none";var Q=r(J);Q.value=Q.__value="countdown";var U=r(Q);U.value=U.__value="animation";var C=r(U);C.value=C.__value="swirl-animation";var E=r(C);E.value=E.__value="christmas-snow";var ee=r(E);ee.value=ee.__value="time-machine",i(P);var ve;$e(P),i(S);var G=r(S,2),Z=s(G);Z.__click=()=>console.log("Preview delay"),i(G),i(xe),i(H),i(D),i(V);var te=r(V,2),ie=s(te),ue=s(ie),Y=r(s(ue),2),ze=s(Y),B=r(s(ze),2);B.__change=v=>c(c().celebrationEffect=v.currentTarget.value);var re=s(B);re.value=re.__value="none";var We=r(re);We.value=We.__value="confetti";var at=r(We);at.value=at.__value="coins";var st=r(at);st.value=st.__value="both",i(B);var Mt;$e(B),i(ze);var gt=r(ze,2),mt=r(s(gt),2);Ae(mt),mt.__change=v=>c(c().celebrationDuration=parseFloat(v.currentTarget.value)),i(gt);var ke=r(gt,2),ct=s(ke),Bt=s(ct);Ae(Bt),Bt.__change=v=>c(c().celebrationAutoTrigger=v.currentTarget.checked),_t(2),i(ct),i(ke);var oi=r(ke,2),Hi=s(oi);Hi.__click=()=>console.log("Test celebration"),i(oi),i(Y),i(ue),i(ie);var di=r(ie,2),ci=s(di),vi=r(s(ci),2),qt=s(vi),ui=r(s(qt),2),Je=s(ui);Je.__change=v=>c(c().soundDuringDelay=v.currentTarget.value);var Vt=s(Je);Vt.value=Vt.__value="none";var Ht=r(Vt);Ht.value=Ht.__value="drumroll";var Ft=r(Ht);Ft.value=Ft.__value="suspense";var _i=r(Ft);_i.value=_i.__value="ticking",i(Je);var fi;$e(Je);var Fi=r(Je,2);Fi.__click=()=>console.log("Test sound during delay"),i(ui),i(qt);var Qt=r(qt,2),pi=r(s(Qt),2),Ze=s(pi);Ze.__change=v=>c(c().soundEndOfDelay=v.currentTarget.value);var Ut=s(Ze);Ut.value=Ut.__value="none";var Gt=r(Ut);Gt.value=Gt.__value="ding";var Yt=r(Gt);Yt.value=Yt.__value="bell";var bi=r(Yt);bi.value=bi.__value="gong",i(Ze);var hi;$e(Ze);var Qi=r(Ze,2);Qi.__click=()=>console.log("Test sound end of delay"),i(pi),i(Qt);var gi=r(Qt,2),mi=r(s(gi),2),Xe=s(mi);Xe.__change=v=>c(c().soundDuringReveal=v.currentTarget.value);var Kt=s(Xe);Kt.value=Kt.__value="none";var Jt=r(Kt);Jt.value=Jt.__value="fanfare";var Zt=r(Jt);Zt.value=Zt.__value="applause";var yi=r(Zt);yi.value=yi.__value="celebration",i(Xe);var wi;$e(Xe);var Ui=r(Xe,2);Ui.__click=()=>console.log("Test sound during reveal"),i(mi),i(gi),i(vi),i(ci),i(di),i(te),pe(v=>{k(se,`${z().validSelectedCount??""} selected`),k(M,`Eligible: ${v??""}${z().excludedCount>0?` (${z().excludedCount} excluded)`:""}`),oe!==(oe=z().selectedPrizeId)&&(O.value=(O.__value=z().selectedPrizeId)??"",Qe(O,z().selectedPrizeId)),Ce=lt(we,1,"form-control form-control-lg",null,Ce,{"border-danger":z().hasValidationWarning,"text-danger":z().hasValidationWarning}),pt(we,z().winnersCount),Nt!==(Nt=c().selectionMode)&&(He.value=(He.__value=c().selectionMode)??"",Qe(He,c().selectionMode)),$!==($=c().displayEffect)&&(ce.value=(ce.__value=c().displayEffect)??"",Qe(ce,c().displayEffect)),pt(Fe,c().displayDuration),pt(F,c().preSelectionDelay),ve!==(ve=c().delayVisualType)&&(P.value=(P.__value=c().delayVisualType)??"",Qe(P,c().delayVisualType)),Mt!==(Mt=c().celebrationEffect)&&(B.value=(B.__value=c().celebrationEffect)??"",Qe(B,c().celebrationEffect)),pt(mt,c().celebrationDuration),Tt(Bt,c().celebrationAutoTrigger),fi!==(fi=c().soundDuringDelay)&&(Je.value=(Je.__value=c().soundDuringDelay)??"",Qe(Je,c().soundDuringDelay)),hi!==(hi=c().soundEndOfDelay)&&(Ze.value=(Ze.__value=c().soundEndOfDelay)??"",Qe(Ze,c().soundEndOfDelay)),wi!==(wi=c().soundDuringReveal)&&(Xe.value=(Xe.__value=c().soundDuringReveal)??"",Qe(Xe,c().soundDuringReveal))},[()=>z().eligibleEntries.toLocaleString()]),f(a,o),qi()}Vi(["change","click"]);var fe=li(()=>Ot),Qa=w('<i class="bi bi-exclamation-triangle"></i> Winners count exceeds available entries',1),Ua=w('<i class="bi bi-exclamation-triangle"></i> Winners count exceeds prize quantity',1),Ga=w('<div class="alert alert-warning mt-3"><!></div>'),Ya=w('<div class="public-selection-interface"><header class="selection-header"><div class="d-flex align-items-center gap-2"><h1 class="h5 mb-0 text-white">Winner Selection</h1></div> <button class="btn btn-light btn-sm"><i class="bi bi-gear"></i> <span class="d-none d-sm-inline ms-1">Manage</span></button></header> <main class="selection-main"><div class="selection-controls"><h2 class="selection-title">Select Winners</h2> <p class="selection-subtitle">Choose a list and prize to begin</p> <div class="selection-info"><div class="info-card"><div class="info-label">Current List</div> <div class="info-value"> </div></div> <div class="info-card"><div class="info-label">Eligible Entries</div> <div class="info-value"> </div></div> <div class="info-card"><div class="info-label">Winners to Select</div> <div class="info-value"> </div></div> <div class="info-card"><div class="info-label">Prize</div> <div class="info-value"> </div></div></div> <button class="big-play-button" aria-label="Start winner selection"><i class="bi bi-play-fill"></i></button> <!></div></main></div>'),Ka=w('<div class="text-center py-4"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Ja=w('<p class="text-muted text-center py-4">No lists yet. Upload a CSV to get started.</p>'),Za=w('<div class="col-md-4 col-lg-3"><div class="card h-100"><div class="card-body"><h6 class="card-title"> </h6> <p class="text-muted small mb-0"> </p></div></div></div>'),Xa=w('<div class="row g-3"></div>'),ja=w('<div class="card"><div class="card-header d-flex justify-content-between align-items-center"><h5 class="card-title">Lists</h5> <button class="btn btn-primary btn-sm"><i class="bi bi-plus"></i> Add List</button></div> <div class="card-body"><!></div></div>'),$a=w('<div class="text-center py-4"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),es=w('<p class="text-muted text-center py-4">No prizes yet. Add a prize to get started.</p>'),ts=w('<p class="text-muted small mt-2 mb-0"> </p>'),is=w('<div class="col-md-4 col-lg-3"><div class="card h-100"><div class="card-body"><h6 class="card-title"> </h6> <span class="badge bg-primary"> </span> <!></div></div></div>'),as=w('<div class="row g-3"></div>'),ss=w('<div class="card"><div class="card-header d-flex justify-content-between align-items-center"><h5 class="card-title">Prizes</h5> <button class="btn btn-primary btn-sm"><i class="bi bi-plus"></i> Add Prize</button></div> <div class="card-body"><!></div></div>'),rs=w('<div class="text-center py-4"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),ns=w('<p class="text-muted text-center py-4">No winners yet. Run a selection to get started.</p>'),ls=w('<span class="badge bg-success">Picked Up</span>'),os=w('<span class="badge bg-warning">Pending</span>'),ds=w("<tr><td> </td><td> </td><td> </td><td> </td><td><!></td></tr>"),cs=w('<div class="table-responsive"><table class="table table-striped"><thead><tr><th>Name</th><th>Prize</th><th>List</th><th>Date</th><th>Status</th></tr></thead><tbody></tbody></table></div>'),vs=w('<div class="card"><div class="card-header"><h5 class="card-title">Winners</h5></div> <div class="card-body"><!></div></div>'),us=w('<p class="text-muted text-center py-4">No selection history yet.</p>'),_s=w("<tr><td> </td><td> </td><td> </td><td> </td></tr>"),fs=w('<div class="table-responsive"><table class="table table-striped"><thead><tr><th>Date</th><th>List</th><th>Prize</th><th>Winners</th></tr></thead><tbody></tbody></table></div>'),ps=w('<div class="card"><div class="card-header"><h5 class="card-title">Selection History</h5></div> <div class="card-body"><!></div></div>'),bs=w('<div class="card"><div class="card-header"><h5 class="card-title">Settings</h5></div> <div class="card-body"><div class="row g-4"><div class="col-md-6"><h6>General</h6> <div class="form-check mb-2"><input type="checkbox" class="form-check-input" id="preventDuplicates"/> <label class="form-check-label" for="preventDuplicates">Prevent duplicate winners</label></div> <div class="form-check mb-2"><input type="checkbox" class="form-check-input" id="preventSamePrize"/> <label class="form-check-label" for="preventSamePrize">Prevent same person winning same prize twice</label></div></div> <div class="col-md-6"><h6>Theme</h6> <div class="mb-3"><label class="form-label" for="primaryColor">Primary Color</label> <input type="color" class="form-control form-control-color" id="primaryColor"/></div> <div class="mb-3"><label class="form-label" for="secondaryColor">Secondary Color</label> <input type="color" class="form-control form-control-color" id="secondaryColor"/></div></div></div></div></div>'),hs=w('<div class="management-interface"><header class="management-header bg-primary text-white p-3 svelte-1uha8ag"><div class="container-fluid d-flex justify-content-between align-items-center"><h1 class="h5 mb-0">Winner Selection - Management</h1> <button class="btn btn-light btn-sm"><i class="bi bi-arrow-left"></i> <span class="ms-1">Back to Selection</span></button></div></header> <div class="container-fluid py-4"><ul class="nav nav-tabs mb-4" role="tablist"><li class="nav-item"><button><i class="bi bi-lightning"></i> <span class="d-none d-md-inline ms-1">Quick Setup</span></button></li> <li class="nav-item"><button><i class="bi bi-list-ul"></i> <span class="d-none d-md-inline ms-1">Lists</span> <span class="badge bg-secondary ms-1"> </span></button></li> <li class="nav-item"><button><i class="bi bi-trophy"></i> <span class="d-none d-md-inline ms-1">Prizes</span> <span class="badge bg-secondary ms-1"> </span></button></li> <li class="nav-item"><button><i class="bi bi-people"></i> <span class="d-none d-md-inline ms-1">Winners</span> <span class="badge bg-secondary ms-1"> </span></button></li> <li class="nav-item"><button><i class="bi bi-clock-history"></i> <span class="d-none d-md-inline ms-1">History</span></button></li> <li class="nav-item"><button><i class="bi bi-gear"></i> <span class="d-none d-md-inline ms-1">Settings</span></button></li></ul> <div class="tab-content"><!></div></div></div>');function zs(a,e){Bi(e,!1),Ia(async()=>{await I.loadAll()}),Ai();var t=Pe(),n=me(t);{var u=o=>{var h=Ya(),d=s(h),p=r(s(d),2);p.__click=()=>W.showManagement(),i(d);var _=r(d,2),T=s(_),m=r(s(T),4),x=s(m),ae=r(s(x),2),be=s(ae,!0);i(ae),i(x);var l=r(x,2),g=r(s(l),2),le=s(g,!0);i(g),i(l);var X=r(l,2),R=r(s(X),2),se=s(R,!0);i(R),i(X);var K=r(X,2),M=r(s(K),2),j=s(M,!0);i(M),i(K),i(m);var O=r(m,2);O.__click=()=>console.log("Start selection");var N=r(O,2);{var he=oe=>{var ye=Ga(),we=s(ye);{var Ce=de=>{var Ie=Qa();_t(),f(de,Ie)},qe=de=>{var Ie=Pe(),V=me(Ie);{var Ee=Ve=>{var ot=Ua();_t(),f(Ve,ot)};A(V,Ve=>{Ue.prizeQuantityExceeded&&Ve(Ee)},!0)}f(de,Ie)};A(we,de=>{Ue.entriesExceeded?de(Ce):de(qe,!1)})}i(ye),f(oe,ye)};A(N,oe=>{Ue.hasValidationWarning&&oe(he)})}i(T),i(_),i(h),pe(()=>{k(be,Ue.listDisplayText),k(le,Ue.eligibleEntries),k(se,Ue.winnersCount),k(j,Ue.prizeDisplayText),O.disabled=!Ue.canStart}),f(o,h)},b=o=>{var h=hs(),d=s(h),p=s(d),_=r(s(p),2);_.__click=()=>W.showPublic(),i(p),i(d);var T=r(d,2),m=s(T),x=s(m),ae=s(x);let be;ae.__click=()=>W.setTab("quicksetup"),i(x);var l=r(x,2),g=s(l);let le;g.__click=()=>W.setTab("lists");var X=r(s(g),4),R=s(X,!0);i(X),i(g),i(l);var se=r(l,2),K=s(se);let M;K.__click=()=>W.setTab("prizes");var j=r(s(K),4),O=s(j,!0);i(j),i(K),i(se);var N=r(se,2),he=s(N);let oe;he.__click=()=>W.setTab("winners");var ye=r(s(he),4),we=s(ye,!0);i(ye),i(he),i(N);var Ce=r(N,2),qe=s(Ce);let de;qe.__click=()=>W.setTab("history"),i(Ce);var Ie=r(Ce,2),V=s(Ie);let Ee;V.__click=()=>W.setTab("settings"),i(Ie),i(m);var Ve=r(m,2),ot=s(Ve);{var bt=Ne=>{Fa(Ne,{})},He=Ne=>{var dt=Pe(),At=me(dt);{var Nt=ce=>{var Me=ja(),Ke=r(s(Me),2),et=s(Ke);{var tt=$=>{var ge=Ka();f($,ge)},Le=$=>{var ge=Pe(),Fe=me(ge);{var it=D=>{var H=Ja();f(D,H)},Te=D=>{var H=Xa();ft(H,5,()=>I.lists,xe=>xe.listId,(xe,Se)=>{var F=Za(),S=s(F),P=s(S),J=s(P),Q=s(J,!0);i(J);var U=r(J,2),C=s(U);i(U),i(P),i(S),i(F),pe(()=>{var E;k(Q,y(Se).metadata.name),k(C,`${(((E=y(Se).entries)==null?void 0:E.length)||0)??""} entries`)}),f(xe,F)}),i(H),f(D,H)};A(Fe,D=>{I.lists.length===0?D(it):D(Te,!1)},!0)}f($,ge)};A(et,$=>{I.loading.lists?$(tt):$(Le,!1)})}i(Ke),i(Me),f(ce,Me)},ht=ce=>{var Me=Pe(),Ke=me(Me);{var et=Le=>{var $=ss(),ge=r(s($),2),Fe=s(ge);{var it=D=>{var H=$a();f(D,H)},Te=D=>{var H=Pe(),xe=me(H);{var Se=S=>{var P=es();f(S,P)},F=S=>{var P=as();ft(P,5,()=>I.prizes,J=>J.prizeId,(J,Q)=>{var U=is(),C=s(U),E=s(C),ee=s(E),ve=s(ee,!0);i(ee);var G=r(ee,2),Z=s(G);i(G);var te=r(G,2);{var ie=ue=>{var Y=ts(),ze=s(Y,!0);i(Y),pe(()=>k(ze,y(Q).description)),f(ue,Y)};A(te,ue=>{y(Q).description&&ue(ie)})}i(E),i(C),i(U),pe(()=>{k(ve,y(Q).name),k(Z,`${y(Q).quantity??""} remaining`)}),f(J,U)}),i(P),f(S,P)};A(xe,S=>{I.prizes.length===0?S(Se):S(F,!1)},!0)}f(D,H)};A(Fe,D=>{I.loading.prizes?D(it):D(Te,!1)})}i(ge),i($),f(Le,$)},tt=Le=>{var $=Pe(),ge=me($);{var Fe=Te=>{var D=vs(),H=r(s(D),2),xe=s(H);{var Se=S=>{var P=rs();f(S,P)},F=S=>{var P=Pe(),J=me(P);{var Q=C=>{var E=ns();f(C,E)},U=C=>{var E=cs(),ee=s(E),ve=r(s(ee));ft(ve,5,()=>I.winners,G=>G.winnerId,(G,Z)=>{var te=ds(),ie=s(te),ue=s(ie,!0);i(ie);var Y=r(ie),ze=s(Y,!0);i(Y);var B=r(Y),re=s(B,!0);i(B);var We=r(B),at=s(We,!0);i(We);var st=r(We),Mt=s(st);{var gt=ke=>{var ct=ls();f(ke,ct)},mt=ke=>{var ct=os();f(ke,ct)};A(Mt,ke=>{y(Z).pickedUp?ke(gt):ke(mt,!1)})}i(st),i(te),pe(ke=>{k(ue,y(Z).displayName),k(ze,y(Z).prize),k(re,y(Z).listName),k(at,ke)},[()=>new Date(y(Z).timestamp).toLocaleDateString()]),f(G,te)}),i(ve),i(ee),i(E),f(C,E)};A(J,C=>{I.winners.length===0?C(Q):C(U,!1)},!0)}f(S,P)};A(xe,S=>{I.loading.winners?S(Se):S(F,!1)})}i(H),i(D),f(Te,D)},it=Te=>{var D=Pe(),H=me(D);{var xe=F=>{var S=ps(),P=r(s(S),2),J=s(P);{var Q=C=>{var E=us();f(C,E)},U=C=>{var E=fs(),ee=s(E),ve=r(s(ee));ft(ve,5,()=>I.history,G=>G.historyId,(G,Z)=>{var te=_s(),ie=s(te),ue=s(ie,!0);i(ie);var Y=r(ie),ze=s(Y,!0);i(Y);var B=r(Y),re=s(B,!0);i(B);var We=r(B),at=s(We,!0);i(We),i(te),pe(st=>{k(ue,st),k(ze,y(Z).listName),k(re,y(Z).prizeName),k(at,y(Z).winnersCount)},[()=>new Date(y(Z).timestamp).toLocaleString()]),f(G,te)}),i(ve),i(ee),i(E),f(C,E)};A(J,C=>{I.history.length===0?C(Q):C(U,!1)})}i(P),i(S),f(F,S)},Se=F=>{var S=Pe(),P=me(S);{var J=Q=>{var U=bs(),C=r(s(U),2),E=s(C),ee=s(E),ve=r(s(ee),2),G=s(ve);Ae(G),G.__change=re=>fe(fe().preventDuplicates=re.currentTarget.checked),_t(2),i(ve);var Z=r(ve,2),te=s(Z);Ae(te),te.__change=re=>fe(fe().preventSamePrize=re.currentTarget.checked),_t(2),i(Z),i(ee);var ie=r(ee,2),ue=r(s(ie),2),Y=r(s(ue),2);Ae(Y),Y.__change=re=>{fe(fe().primaryColor=re.currentTarget.value),fe().applyTheme()},i(ue);var ze=r(ue,2),B=r(s(ze),2);Ae(B),B.__change=re=>{fe(fe().secondaryColor=re.currentTarget.value),fe().applyTheme()},i(ze),i(ie),i(E),i(C),i(U),pe(()=>{Tt(G,fe().preventDuplicates),Tt(te,fe().preventSamePrize),pt(Y,fe().primaryColor),pt(B,fe().secondaryColor)}),f(Q,U)};A(P,Q=>{W.currentTab==="settings"&&Q(J)},!0)}f(F,S)};A(H,F=>{W.currentTab==="history"?F(xe):F(Se,!1)},!0)}f(Te,D)};A(ge,Te=>{W.currentTab==="winners"?Te(Fe):Te(it,!1)},!0)}f(Le,$)};A(Ke,Le=>{W.currentTab==="prizes"?Le(et):Le(tt,!1)},!0)}f(ce,Me)};A(At,ce=>{W.currentTab==="lists"?ce(Nt):ce(ht,!1)},!0)}f(Ne,dt)};A(ot,Ne=>{W.currentTab==="quicksetup"?Ne(bt):Ne(He,!1)})}i(Ve),i(T),i(h),pe(()=>{be=lt(ae,1,"nav-link svelte-1uha8ag",null,be,{active:W.currentTab==="quicksetup"}),le=lt(g,1,"nav-link svelte-1uha8ag",null,le,{active:W.currentTab==="lists"}),k(R,I.lists.length),M=lt(K,1,"nav-link svelte-1uha8ag",null,M,{active:W.currentTab==="prizes"}),k(O,I.prizes.length),oe=lt(he,1,"nav-link svelte-1uha8ag",null,oe,{active:W.currentTab==="winners"}),k(we,I.winners.length),de=lt(qe,1,"nav-link svelte-1uha8ag",null,de,{active:W.currentTab==="history"}),Ee=lt(V,1,"nav-link svelte-1uha8ag",null,Ee,{active:W.currentTab==="settings"})}),f(o,h)};A(n,o=>{W.view==="public"?o(u):o(b,!1)})}f(a,t),qi()}Vi(["click","change"]);export{zs as component};
